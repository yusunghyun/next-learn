## Next learn 후기/메모

next는 몇번 써봤고 스터디에서 책도 한바퀴 돌려보고 공식문서도 한바퀴 돌려보았지만 내 자신감의 **기준**에는 달성하지 못했다.(= 강의할 수 있을 정도의 마음가짐) 이번에 **next 14**가 나오면서 next learn 페이지가 나왔는데 다시금 영어공부 + 개발공부 를 도전해보려고 한다.

`영어공부` + `개발공부`를 동시에 하고 싶었는데 별에별거를 했지만 효과가 좋지 못했다… <함께자라기>에서 말하기를 1단계 더 어려워야 `몰입`을 할 수 있다고… 일단 나는 `영어`로 `난이도 올리기`를 진행했는데 어려운 기술이나 난해한 기술로도 `난이도`를 올려버려서 `버거웠다.`

조금 진행해본 소감은.. 너무 좋다! `이미 아는 내용에 디테일`을 얹는 학습과 `영어 리딩 속도`가 점진적으로 증가함이 느껴진다…! 그리고 자진해서(필요한 상황이 아님에도) 공식문서를 `정독`한다는 행위가 나의 경험에 좋은 레퍼런스로 다가왔다..! (한번이 어렵지 두번은 쉬우니)

- 1강
    - 작은 재무대시보드를 만들 것
    - example을 제공함
    - 모든 코드를 이해할 필요 없다
    - next feature을 학습하기 위해 미리 준비했다.
    - 여러분들을 높은 확률로 이미 코드베이스가 있는 곳에서 일할 것
- 2강
    - tailwind 에 대해서
    - 스타일링할 걱정하지마라 우리가 알아서 해준다
    - css module 맛보게 해줌
    - 진짜진짜 처음 하는 사람을 위한 learn 같다 너무 친절하고 하나도 안귀찮게 해서 P에게는 최고이다.
    - 흥미가 멈추지 않는다
- 3강
    - 통신을 태우지 않고 build 때 font최적화를 해준다
    - 귀여운 폰트 사용 실습하는데 기준비된 컴포넌트들이 잘되어있어서 게임을 깨는 느낌이 좋당ㅎㅎ
    - 이미지
        - 동일한 비율의 사이즈를 픽셀로 기선언하는건 좋은 방식이다
        - md:block 이 tailwind의 미디어쿼리였다!
        - 그냥 사용법만 배운다
- 4강
    - 배울것
        - 라우트 파일 시스템을 배워보다
        - 폴더 룰을 배우자
        - 레이아웃 사용법을 배우자
        - 중첩라우팅
    - app route에서 코어 동작들을 배우는데 이미 아는 내용이라 시시할 뻔 했지만 colocate 라는 무슨 뜻인지도 모르는 단어 덕에 ‘몰입’에 도움이 되었다.
    - page.tsx가 있어야 라우트다.
    - 중첩라우팅 해보는 실습. 쉽다.
    - 
    - 여기까지 2시간 소요되었다.
        - 영어해석하고, 진지하게 읽기
    - layout 리랜더링 방지 가능하다
    - 미리 버셀이 만들어준 탭아이콘 등등 덕에 귀찮고 막막한 부분이 모두 해소되고 가닥이 잡혀간다 개뀰
    - 루트 레이아웃은 필수이고 모든 곳에 적용됨

여기까지 2시간 소요

---

- 5강
    - 배울것
        - next/link
        - usePathname
        - How navigation work
    - 대부분의 사람들은 HTML,mdn의 여러 기능들을 외우면서 쓰는데, 앞으로는 Next가 그렇게 되버릴까?(몇몇 아웃라이어 제외)
    - a -> Link
        - without full refresh!
        - 이유는 Automatic code-splitting and prefetching
            - route segments를 바탕으로 자동으로 코드스플리팅을 한다.
            - 이는 격리됨을 의미하고 따라서 에러가 나도 죽지않는다.
            - 백그라운드에서 넘어갈곳을 자동으로 프리패치한다. 그래서 즉각전환처럼 보임ㄷㄷ
    - usePathname
        - client 사이드에서만 가능
        - clsx와 함께 동적으로 랜더링가능
        - layout이라서... 랜더링 이점 또한 있겠지..?
- 6강
    - 배울것
        - git
        - vercel account
        - postgres db
        - seed db
    - git&vercel 배포는 해보았으니 스윽 읽자 알거나 다르면 스킵해도 된다함.
    - Hooray! 🎉
    - vercel deploy후
        - storage에 postgresDB 만들고 리전 고르고
        - 리전은 수정이 불가하댄다..!
    - seed.js는 DB 테이블을 만드는 스크립트이다. 
    - 7강을 정석으로 학습하기 위해 레포 만들고 배포 해봤다..
        - seed.js 꽤나 잘 만든 스크립트이다. 원격으로 테이블을 뚝딱뚝딱 만드넹
        - 덕분에 퀴즈도 맞췃당 키득
    - 영어공부로 난이도를 올리고 Next는 이미 알던거라... 난이도가 헷징되어서 할만한건가?
    - 아직 '몰입' 현상 중 이니 일단 진행하자

5,6강 1시간 반소요

---

- 7강
    - 배울것
        - 데이터를 가져오는 다양한 접근방식
        - server component가 데이터에 어떻게 접근하는지
        - 네트워크 워터폴
        - 병렬 데이터 가져오기
    - app/api 에서 GET이라고 만들며 쓰던 기억이 났다
    - next하다보니 그동안 하던 공부들에 비하면 '암기'의 중요성 또한 있는 것 같은데... 복습하기를 잘한 선택 같다.
    - RSC를 쓰면 API layer를 스킵할 수 있다. -> role에 의해 필요할 것 같은데..?
    - RSC 외에 데이터 패치 내용은 다루지 않아보임..
    - 쿼리를 제공할거니 SQL 사용안해본거에 걱정하지 말라 ㅋㅋㅋㅋ
    - RSC는 async이니 await 써도된다는 말을 되게 강조한다.
        - 싱글쓰레드 JS를 응용해서 data가 undefined인 것을 아예 막을 수도 있으려나...?
    - 사실 RSC는 해봐서 기세팅된 여러가지 SQL 함수들이 더 신기하닼ㅋㅋㅋ
    - 아주 준비를 잘 해놨네... 나도 TDD 강의할때 이랬었는데 
    - DB 직접 터치하는거 하지 말라고 배웠는데... next learn은 Full-Stack 전용인가? JSP는 이렇게들 하나..?
    - request waterfall
        - await가 많아서 줄줄이 소세지로 요청&받기 가 느려짐
        - Promise.all로 해결가능함!
        - 한개만 느리다면 어떡할까..? -> 다음강에 계속 ㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋ 센스쟁이 버셀
- 8강
    - 배울것
        - static and dynamic rendering (SSG, ISR ???)
        - 
    - 14의 실험기능이 포함된다..! 재밌겠당
    - static rendering
        - 빌드때, revalidation때 저장?확정?
        - SEO에 좋다.
        - 정적의 반대는 동적
    - dynamic rendering
        - url cookie searchParams
    - ServerComponent혹 패칭함수에 `unstable_noStore`를 쓸 수 있다.(실험)
        - fetch(..., {cache: 'no-store'})와 같댄다..! 
        - 무자비하게 외워서 쓰는게 아쉽군
    - ? 한개만 느린 통신에 솔루션을 알려주지 않네...? 워터폴 하라는 건지 병렬 하라는 건지?? 다음강의 스트리밍인데?? 이게 뭔지도 모르니까 일단 보자
- 9강
    - 배울것
        - 로딩
        - 스트리밍
        - 라우트그룹
        - Suspense
    - ㅋㅋㅋㅋ이제 알려준다함
    - 스트리밍
        - 점진적으로 던져주는 데이터 전송 기술
        - slow request로 전체 페이지가 블로킹되는걸 방지한다
        - 사용자가 일부만 볼 수 있게 해줌
        - 청크 랜더는 수평적...
    - 스트리밍 구현 방법
        - page.tsx -> loading.tsx
            - suspense위에 구축된 special next file이다... 어쩌라는거지..
            - `loading`이 있어야 타 static 컴포넌트가 즉각 랜더링되네 ㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋㅋ
            - 이거 Next의 RSC등을 잘 활용하기 위해서 loading을 강제하는건가...? 이것이 '프레임워크'란 건가..?
            - 스켈레톤 테일윈드로 만드니 기괴하군...
            - 아 상위에 있으면 일단 덮는다고 하니 좋네요ㅎㅎ
    - 컴포넌트 -> Suspense
        - 캬 loading과 suspense 쓰니까 다다닥 레고블록마냥 따로따로 놀게 할 수 있네... 모노레포에서 이거 다루면 쩔겠다
    - 괄호로 영향없는 폴더그루핑가능 -> 이미 13에 있던거
    - Practices 보니까
        - 로딩따로, suspense따로 구성해서 결국 request를 각/각/각 놀게끔 하네
        - 스켈레톤 크기를 잘못하면 layout shift위험 있겠다.
        - RN에서 코드는 이렇게 짰는데 실제로 UX좋게끔 하는 방법이 있었을까...?
        - 결국 정답은 custom hook 패턴이라고 생각했는데 커스텀훅이 아니네 ㅋㅋㅋㅋㅋㅋㅋ
        - domain?패턴 같아보인다. 컴포넌트가 각각 로직도 들고있는... 이거 엮여있는 data fetch가 있다면 조금 화날듯. 
        - 이거는 BE와 함께 풀 과제라고 생각해두자
        - 저자도 똑같이 wrapper패턴으로 퉁치넹
        - 정답은 없다고함 ㅎㅎㅎㅎ
        - UI popping이라고도 함 ㅎㅎㅎ
    - 지금까지는 `정적`이 아닌 `동적`상황에서의 UX 최적화 방법을 알아본 것이고, 다음 장 부터는 partial + `정적`을 알려준댄다!
    - 느낀점
        - 아 너무 간편하다... 전반적인 웹의 수준이 매우 올라갈것으로 기대된다. 
        - 이렇게까지 퀄을 올려야하나...? 일단 GPT는 현재 못따라올것 같아서 다행이다
        - 목적조직이 세분화된 회사라면... 내가 잘 캐리할 수 있을 것으로 기대된당

8&9 1시간, 현재 총 6시간

---

- 10강
    - 배울것
        - Partial Prerendering(실험적)(P.P)
    - 14 실험이라고 스킵해도된다함 ㅠㅜ
    - react class component처럼 이것 또한 경험치가 될거라 노스킵.
    - 켄트씨 말이 조오금 공감되는 것 같다. 변화가 넘 잦고 실험이 넘 잦다. 근데 왤~~케 standard일까...jquery처럼 다수가 답이겠지,, remix 사이드해볼 용기가 날 여유까지는 아직 없는 것 같다
    - 왜 아직 실험일까? 이미 web에 존재하는 기능들로 만든 기술일탠데 
    - `use client와 정적과 얼마나 유사하고 다를까 `
    - P.P랑 13에서 열심히 홍보한 RSC랑 뭐가 다르지?
    - 엄~청 큰 웹이라면 정신없을 수도?
        - 전체를 띡 보여주는 것 보다는 나을 수도 있다
        - 먼미래에 랜더링 우선순위 전략도 나올 것 같다(for BE)
    - 폴백과 정적파일은 함께 저장됨
    - 그냥 loading과 suspense 쓰는거 아닌가??? `unstable_noStore랑 함께 고찰해봐야겠다`
    - 다음 장 부터는 검색/페이지네이션을 다룬다고함 이제 숨돌리자
- 11강
    - 배울것
        - Next.js APIs: `searchParams`, `usePathname`, `useRouter`.
        - using URL search params
    - 그냥 든 생각인데 5년전인가 간단한 게시글 배포한번 해보려고 진짜 울면서 서버 디버깅 계속하고 그랬는데... 좀 많이 변한것 같다 세상이..
    - React를 많이 배제하고 코드를 짜는 느낌이다. jsx+nextJs 가 나올지도..?아닌가
    - 클린코드 디자인패턴에 너무 심하게 매몰될 뻔했는데 잠시 다행이다
    - 와 쩐다 글자 하나하나 스켈레톤이 뜨길래 뭐지? 하면서 봤는데 next로 search & result를 해결한거였다. url을 이용하고.. client fetch는 쓰지않고.! 그런데 더 쩌는건 두번째 검색부터는 5배는 빨라진 것이다... 뭐지.. 누가 뭘 할거지??DB?Next?
        - 글자 변동마다 server로부터 rsc를 받는 것 같고 그 rsc들이 캐싱된 것 같다...(네트워크탭 보고)
        - 와...경외롭다 경외로워ㅜㅜ
    - CSR에서는 useSearchParams SSR에서는 searchParams(props).
    - 점점 csr의 의미가 흐릿해진다..ㅠㅜ
    - 협업시에도 꽤 아니 엄청 많이 헷갈릴게 보인다... 1년안에 기똥찬 패턴이 나올것
    - dynamic -> csr, 정적 -> ssr? , 짬뽕 -> rsc? 앵간 다이나믹한 영역들은 csr같아보인다
    - 요약: state 안쓰고 검색 & 페이지네이션을 해보자
    - 복습: useSearchParams, searchParams, new URLSearchParams set&delete, replace

다시 영어를 진지하게 임하는 계기가 되어서 좋다

- 12강
    - 배울것
        - React Server Actions + mutate data
        - form + server component
        - validation BP
        - revalidatePath API
        - dynamic route
        - useFormStatus
    - server action (14 등장 기술)
        - 'use server'를 컴포넌트 내 함수 내에 쓴다?!?!
        - 점진적 향상?!?!
    -  use server내용이 react 공식문서에도 있다. 실험이라는 아이콘이 박혀있으며 next와 협업중이라는 내용도 있는 것 같다.
        - 이거.. 뭔가 쎄하기도 하다...? 캔트C가 말한것 처럼 소프트웨어 측면에서 이게 맞나 싶다(SW를 제대로 배워보질 못해서 더 모르겠다)
    - 여러 컨벤션과 기술들도 우연의 역사로 만들어진 히스토리를 강연에서 들은 적이 있다.
        - react+next가 정답인 세상이 오면 이는 믿게 될 것이고
        - 그게 아니라면.. 지각변동이 일어날 것 같다. bun + lit ㅋㅋ
    - package 패턴은 꼭 익혀두자
    - swc 개발하신 형님은 deno에서도 일했고 vercel에서도 일하셨다. 내가 비즈니스 걱정할 레벨은 아닌 것 같다.
    - Form + action + user server + async function을 했더니 터미널에 로그가 잘 찍히는데 네트워크탭에 해당 페이지로 POST 패치를 같은 내용으로 던졌다..!?
        - 단순 로그 이상의 일이 일어나고 있다..!
    - zod를 안내하다니... 너무 기쁘다 내가 믿는 것들만 부상중이다ㅠㅜ
    - next는 client-side router cache를 지원해준다...너무 쩔어서 말이 안나옴
    - 동적 아이디 알아서 uuid 로 보안해준다
    - react의 랜더링 전 기본값으로 미리 틀만 그리던 작업을 next에서는 db를 태운 값으로 가능하다 pre-populate(미리 채워진)
    - edit시 함수에 매개변수로 id를 넣는건 안전하지 않다고 한다. server action을 이용해서 보호할 수 있다.
    - cmd+shift+. -> 파일을 함수별로 볼 수 있다..!
    - **정리**
        - server action을 이용한 next의 form관리 권장 방법
            - form action 이용
            - zod + (sql) +revalidatePath
            - bind -> 커링으로 해결해도 깔끔할 것 같다.
        -  흔하지만 좋은 경험을 준 예제 같다.
        - 용어는 조금 헷갈린다.. server component, use server, RSC, SSR ...
        - 실제로 SQL에 직접 권한을 받기 어려울테니.. actions 의 내용이 api로 바뀔려나? 그럼 SSR의 묘미를 못느끼는 것 같아보인다 ㅇㅅㅇ
    - 이 챕터 1시간 반이나 걸렸다...
- 13장
    - 배울것
        - error핸들링
    - error.tsx
        - js native error 를 받음
        - use client 필요
    - notFound
        - early return패턴 사용
        - error.tsx 보다 구체적, 우선순위임
- 14장
    - 배울것
        - server-side validation width Server Action, `useFormState`
        - a11y
    - `eslint-plugin-jsx-a11y`
        - 초기에 웹 접근성 이슈를 잡아주는 eslint내장
    - next 권고 웹접근성 개선
        - 폼
            - Client-Side
                - input - required
                - "이 입력란을 작성하세요"
    - input.action에서 dispatch호출 시 useFormState에서 action 함수를 받고 action은 zod와 결합되어 safeParse등을 사용하여 error.message를 리턴하거나 sql create로직까지 넘어가거나 된다.
    
